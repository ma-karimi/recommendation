# ูุงุฒููุฏโูุง ููุงุจุน ุณุณุชู ุชูุตู ูุญุตููุงุช

ุชุงุฑุฎ: 2024-11-01

---

## ๐ ุขูุงุฑ ูุนู ุณุณุชู

```
โ ฺฉุงุฑุจุฑุงู: 224,959
โ ูุญุตููุงุช: 36,114 (ูุนุงู)
โ ุณูุงุฑุดุงุช: 19,420
โ ุชูุตูโูุง: 4,499,180 (20 ุจู ุงุฒุง ูุฑ ฺฉุงุฑุจุฑ)
```

---

## ๐พ ูุญุงุณุจู ุญุฌู ุญุงูุธู

### ุญุฌู ูุนู ุฏุฑ Redis

- **ุชุนุฏุงุฏ ฺฉู ุชูุตูโูุง:** 4,499,180
- **ุญุฌู ูุชูุณุท ูุฑ ุชูุตู:** 380 bytes
- **ุญุฌู ฺฉู ุฏุฑ Redis:** ~1.6 GB
- **ุจุง Overhead (1.5x):** **~2.4 GB**
- **ุชูุตู ุดุฏู:** **4 GB RAM**

### ุณุงุฎุชุงุฑ ูุฑ ุชูุตู ุฏุฑ Redis

```json
{
  "product_id": 12345,
  "score": 4.5,
  "reason": "Collaborative: 10 ฺฉุงุฑุจุฑุงู ูุดุงุจู ุงู ูุญุตูู ุฑุง ุฎุฑุฏูโุงูุฏ",
  "confidence": 0.9,
  "collaborative_details": "{\"similar_users\":[...],\"total_similar_users\":10}"
}
```

**ุญุฌู:** ~380 bytes/recommendation

---

## ๐ ูพุดโุจู ุฑุดุฏ

| ุฏูุฑู | ฺฉุงุฑุจุฑุงู | ุชูุตูโูุง | ุญุฌู Redis | RAM ููุฑุฏ ูุงุฒ |
|------|---------|----------|-----------|---------------|
| **ูุนู** | 224,959 | 4,499,180 | 1.6 GB | **4 GB** |
| **6 ูุงู** | 269,950 | 5,399,000 | 1.9 GB | **4 GB** |
| **1 ุณุงู** | 337,438 | 6,748,760 | 2.4 GB | **4-8 GB** |
| **2 ุณุงู** | 449,918 | 8,998,360 | 3.2 GB | **8 GB** |
| **3 ุณุงู** | 674,877 | 13,497,540 | 4.8 GB | **8-12 GB** |

### ูุฑุถุงุช ุฑุดุฏ:
- ุฑุดุฏ 20% ุฏุฑ 6 ูุงู ุงูู
- ุฑุดุฏ 50% ุณุงูุงูู
- ุฑุดุฏ ุฎุท (ูู ููุง)
- 20 ุชูุตู ุจู ุงุฒุง ูุฑ ฺฉุงุฑุจุฑ

---

## ๐ป ูุงุฒููุฏโูุง ููุงุจุน

### ๐ฏ ฺฏุฒูู 1: ุดุฑูุน ฺฉุงุฑ (ุชูุตู ูโุดูุฏ)

**ุจุฑุง ฺฉุงุฑุจุฑุงู ูุนู ุชุง 1 ุณุงู:**

```
RAM:     4 GB (Redis + OS + Overhead)
CPU:     2 vCPU
Storage: 20 GB SSD
Network: 100 Mbps
```

**ูุฒูู ูุงูุงูู:**
- **DigitalOcean:** $24/month
- **Hetzner:** โฌ15/month (~$18)
- **AWS Lightsail:** $20/month
- **Vultr:** $24/month

**ููุงุญุธุงุช:**
- โ ฺฉุงู ุจุฑุง ุดุฑูุน
- โ ูโุชูุงูุฏ ุชุง 400K ฺฉุงุฑุจุฑ ุฑุง ูพุดุชุจุงู ฺฉูุฏ
- โ๏ธ ูุงุฒ ุจู ุงุฑุชูุง ุจุนุฏ ุงุฒ 1 ุณุงู

---

### ๐ฏ ฺฏุฒูู 2: ูุชูุณุท (ุฑุดุฏ 50% ุณุงูุงูู)

**ุจุฑุง 2-3 ุณุงู:**

```
RAM:     8 GB (Redis + OS + Overhead)
CPU:     4 vCPU
Storage: 50 GB SSD
Network: 250 Mbps
```

**ูุฒูู ูุงูุงูู:**
- **DigitalOcean:** $48/month
- **Hetzner:** โฌ30/month (~$36)
- **AWS Lightsail:** $40/month
- **Vultr:** $48/month

**ููุงุญุธุงุช:**
- โ ูพุดุชุจุงู ุชุง 700K ฺฉุงุฑุจุฑ
- โ ุงูุนุทุงูโูพุฐุฑ ุจุดุชุฑ
- โ ููุงุณุจ ุจุฑุง 2-3 ุณุงู

---

### ๐ฏ ฺฏุฒูู 3: ุจุฒุฑฺฏ (ุฑุดุฏ ุณุฑุน)

**ุจุฑุง 3+ ุณุงู ุง ุฑุดุฏ ููุง:**

```
RAM:     16 GB (Redis + OS + Overhead)
CPU:     8 vCPU
Storage: 100 GB SSD
Network: 1 Gbps
```

**ูุฒูู ูุงูุงูู:**
- **DigitalOcean:** $96/month
- **Hetzner:** โฌ60/month (~$72)
- **AWS Lightsail:** $80/month
- **Vultr:** $96/month

**ููุงุญุธุงุช:**
- โ ุขูุงุฏู ุจุฑุง ุฑุดุฏ ุณุฑุน
- โ ูโุชูุงูุฏ ุชุง 1M+ ฺฉุงุฑุจุฑ ุฑุง ูพุดุชุจุงู ฺฉูุฏ
- โ headroom ุฒุงุฏ

---

## โ๏ธ ุชูุธูุงุช Redis

### Production Settings

```bash
# /etc/redis/redis.conf

# Memory settings
maxmemory 3gb
maxmemory-policy allkeys-lru

# Persistence (ุจุฑุง backup)
appendonly yes
appendfsync everysec

# Performance
tcp-keepalive 60
timeout 0
```

### Monitoring

```bash
# ูุตุจ redis-cli ุจุฑุง ูุงูุชูุฑูฺฏ
redis-cli --stat

# ุง ุงุณุชูุงุฏู ุงุฒ redis-exporter + Prometheus
# ุง Grafana Redis Dashboard
```

---

## ๐ง ุชูุณูโุจูุฏ ููุงุจุน (ุงฺฏุฑ ูุงุฒ ุจุงุดุฏ)

### Redis Cluster (ุจุฑุง ููุงุณ ุจุงูุง)

ุงฺฏุฑ ุญุฌู ุงุฒ 8 GB ุจุดุชุฑ ุดุฏ:

```
3 Masters ร 4 GB = 12 GB effective
3 Replicas ร 4 GB = 12 GB backup
```

**ููุงุญุธุงุช:**
- โ High Availability
- โ Load Distribution
- โ๏ธ ูพฺุฏฺฏ ุจุดุชุฑ
- โ๏ธ ูุฒูู ุจุดุชุฑ

### Read Replicas (ุจุฑุง ุชุฑุงูฺฉ ุจุงูุง)

ุงฺฏุฑ ุชุนุฏุงุฏ ุฎูุงูุฏู ุจุงูุง ุจุงุดุฏ:

```
1 Master (writes)
2-3 Replicas (reads)
```

---

## ๐ ูุตุฑู ููุงุจุน ูุงูุน

### Redis

```bash
# ุงุณุชูุงุฏู ูุนู
redis-cli INFO memory
# used_memory: ~2.4 GB
# used_memory_peak: ~2.5 GB
```

### CPU

- **ุชููุฏ ุชูุตู:** 15-45 ุฏููู (2-4 cores)
- **ุฎูุงูุฏู ุงุฒ Redis:** < 1ms (negligible)
- **ุงุฌุฑุง API:** < 5% CPU

---

## ๐ก ุจูููโุณุงุฒ

### ฺฉุงูุด ูุตุฑู ุญุงูุธู

1. **ูุดุฑุฏูโุณุงุฒ ุฏูู:**
   - ุงุฒ "ูุดุงุจู" ุจู ุฌุง "Collaborative: X ฺฉุงุฑุจุฑุงู..."
   - ุตุฑููโุฌู: ~10%

2. **ูุญุฏูุฏ ฺฉุฑุฏู collaborative_details:**
   - ููุท 3 ฺฉุงุฑุจุฑ ูุดุงุจู (ุจู ุฌุง 5)
   - ุตุฑููโุฌู: ~15%

3. **ุงุณุชูุงุฏู ุงุฒ Redis compression:**
   ```bash
   # ุฏุฑ redis.conf
   ziplist-max-entries 512
   ziplist-max-value 64
   ```

### ุงูุฒุงุด ุนููฺฉุฑุฏ

1. **Connection Pooling:**
   - ุงุณุชูุงุฏู ุงุฒ `redis-py` connection pool (max 50 connections)

2. **Pipelining:**
   - ุจุฑุง batch operations

3. **Caching Products:**
   - ฺฉุด ฺฉุฑุฏู ุงุทูุงุนุงุช ูุญุตููุงุช (ุตุฑููโุฌู query)

---

## ๐ ุชูุตู ููุง

### ุจุฑุง ุดุฑูุน (224K ฺฉุงุฑุจุฑ ูุนู):

**โ ุณุฑูุฑ ฺฉูฺฺฉ ฺฉุงู ุงุณุช:**
```
Provider: Hetzner ุง DigitalOcean
Spec: 4 GB RAM, 2 vCPU, 20 GB SSD
Cost: $18-24/month
Duration: 6-12 ูุงู
```

### ุจุนุฏ ุงุฒ 1 ุณุงู (337K ฺฉุงุฑุจุฑ):

**โ ุงุฑุชูุง ุจู ูุชูุณุท:**
```
Spec: 8 GB RAM, 4 vCPU, 50 GB SSD
Cost: $36-48/month
```

### ุจุนุฏ ุงุฒ 3 ุณุงู (675K ฺฉุงุฑุจุฑ):

**โ ุงุฑุชูุง ุจู ุจุฒุฑฺฏ:**
```
Spec: 12-16 GB RAM, 4-8 vCPU, 100 GB SSD
Cost: $72-96/month
```

---

## ๐ ูฺฉุงุช ููู

1. **Redis TTL:** ุชูุตูโูุง ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ 7 ุฑูุฒ expire ูโุดููุฏ
2. **Backup:** ุงุณุชูุงุฏู ุงุฒ AOF ุจุฑุง persistence
3. **Monitoring:** ุฑุงูโุงูุฏุงุฒ Alert ุจุฑุง memory usage > 80%
4. **Scaling:** ุดุฑูุน ุจุง ฺฉ ุณุฑูุฑุ scale horizontally ุฏุฑ ุตูุฑุช ูุงุฒ
5. **Cost:** ูุฒูู ุงุตู ุณุฎุชโุงูุฒุงุฑ ุงุณุชุ ูู ูพุงุชูู ุง Redis

---

## ๐ ููุงุจุน ุฎุงุฑุฌ

- [Redis Memory Optimization](https://redis.io/docs/manual/optimization/memory/)
- [Redis Production Best Practices](https://redis.io/docs/manual/patterns/redis-best-practices/)
- [DigitalOcean Pricing](https://www.digitalocean.com/pricing/)
- [Hetzner Cloud](https://www.hetzner.com/cloud)

---

**ูููู ุจุงุดุฏ! ๐**

