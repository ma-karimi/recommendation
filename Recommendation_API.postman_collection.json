{
	"info": {
		"_postman_id": "recommendation-api-001",
		"name": "سیستم توصیه محصولات - Recommendation API",
		"description": "مجموعه کامل endpointهای API سیستم توصیه محصولات\n\n**راه‌اندازی:**\n1. راه‌اندازی API: `python run_recommendation.py api --host 0.0.0.0 --port 8000`\n2. یا: `uvicorn recommendation_api:app --host 0.0.0.0 --port 8000`\n\n**مستندات:**\n- Swagger UI: http://localhost:8000/docs\n- این مجموعه: شامل تمام endpointها با مثال‌ها\n\n**متغیرها:**\n- `base_url`: آدرس پایه API (پیش‌فرض: http://localhost:8000)\n- `user_id`: شناسه کاربر نمونه (پیش‌فرض: 9194445)\n- `product_id`: شناسه محصول نمونه (پیش‌فرض: 501838)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "recommendation-api"
	},
	"item": [
		{
			"name": "اطلاعات عمومی",
			"item": [
				{
					"name": "صفحه اصلی - Root",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "صفحه اصلی API - اطلاعات کلی سیستم"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/",
									"host": [
										"{{base_url}}"
									],
									"path": [
										""
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"سیستم توصیه محصولات\",\n    \"version\": \"1.0.0\",\n    \"status\": \"active\"\n}"
						}
					]
				},
				{
					"name": "بررسی سلامت - Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "بررسی سلامت سیستم و وضعیت API\n\n**استفاده:**\n- Monitoring و Alerting\n- بررسی اینکه API در حال اجرا است\n- کنترل سلامت کلی"
					},
					"response": [
						{
							"name": "Healthy System",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/health",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"health"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"healthy\",\n    \"recommender_ready\": false,\n    \"products_loaded\": 36114\n}"
						}
					]
				},
				{
					"name": "آمار سیستم - System Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"stats"
							]
						},
						"description": "دریافت آمار کلی سیستم شامل:\n- تعداد کل محصولات\n- وضعیت recommender\n- اتصال Redis\n- آمار Redis (حجم حافظه، تعداد توصیه‌ها)"
					},
					"response": [
						{
							"name": "Stats Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/stats",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"stats"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"total_products\": 36114,\n    \"recommender_ready\": false,\n    \"redis_connected\": true,\n    \"redis_stats\": {\n        \"total_recommendations\": 3,\n        \"memory_usage_mb\": 80.27\n    }\n}"
						}
					]
				}
			],
			"description": "Endpointهای عمومی برای اطلاعات و بررسی وضعیت سیستم"
		},
		{
			"name": "توصیه‌ها - Recommendations",
			"item": [
				{
					"name": "دریافت توصیه‌های کاربر",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/recommendations/{{user_id}}?limit=10&use_redis=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recommendations",
								"{{user_id}}"
							],
							"query": [
								{
									"key": "limit",
									"value": "10",
									"description": "تعداد توصیه‌ها (پیش‌فرض: 10)"
								},
								{
									"key": "use_redis",
									"value": "true",
									"description": "استفاده از Redis (پیش‌فرض: true)"
								}
							]
						},
						"description": "**این endpoint اصلی API شماست!**\n\nدریافت توصیه‌های محصولات برای یک کاربر خاص\n\n**پارامترها:**\n- `user_id` (path): شناسه کاربر (required)\n- `limit` (query): تعداد توصیه‌ها (default: 10)\n- `use_redis` (query): استفاده از Redis برای خواندن سریع (default: true)\n\n**عملکرد:**\n1. تلاش برای خواندن از Redis (سریع، < 1ms)\n2. اگر در Redis موجود نبود، استفاده از fallback (کندتر، ~50-100ms)\n\n**پاسخ شامل:**\n- `product_id`: شناسه محصول\n- `score`: امتیاز توصیه\n- `reason`: دلیل توصیه\n- `confidence`: میزان اطمینان\n- `product_title`: عنوان محصول\n- `product_price`: قیمت محصول\n- `product_stock`: موجودی\n- `collaborative_details`: جزئیات collaborative filtering"
					},
					"response": [
						{
							"name": "Success with Redis",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/recommendations/{{user_id}}?limit=10&use_redis=true",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"recommendations",
										"{{user_id}}"
									],
									"query": [
										{
											"key": "limit",
											"value": "10"
										},
										{
											"key": "use_redis",
											"value": "true"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n    {\n        \"product_id\": 501838,\n        \"score\": 1587.0,\n        \"confidence\": 1.0,\n        \"reason\": \"Collaborative: 1 کاربران مشابه این محصول را خریده‌اند\",\n        \"product_title\": null,\n        \"product_price\": null,\n        \"product_stock\": null,\n        \"collaborative_details\": {\n            \"similar_users\": [\n                {\n                    \"user_id\": 9391201,\n                    \"similarity\": 0.0009,\n                    \"similarity_percent\": 0.09\n                }\n            ],\n            \"total_similar_users\": 1\n        }\n    },\n    {\n        \"product_id\": 12345,\n        \"score\": 1500.0,\n        \"confidence\": 0.95,\n        \"reason\": \"Content-based: مشابه محصولات قبلی شما\",\n        \"product_title\": \"محصول نمونه\",\n        \"product_price\": 100000.0,\n        \"product_stock\": 50\n    }\n]"
						},
						{
							"name": "Service Unavailable (503)",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/recommendations/{{user_id}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"recommendations",
										"{{user_id}}"
									]
								}
							},
							"status": "Service Unavailable",
							"code": 503,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"detail\": \"توصیه‌ای برای این کاربر یافت نشد و سیستم در حال بارگذاری است\"\n}"
						}
					]
				},
				{
					"name": "دریافت 5 توصیه اول",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/recommendations/{{user_id}}?limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recommendations",
								"{{user_id}}"
							],
							"query": [
								{
									"key": "limit",
									"value": "5",
									"description": "تعداد توصیه‌ها"
								}
							]
						},
						"description": "مثال: دریافت 5 توصیه اول برای کاربر"
					},
					"response": []
				},
				{
					"name": "بدون Redis (Fallback)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/recommendations/{{user_id}}?use_redis=false",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recommendations",
								"{{user_id}}"
							],
							"query": [
								{
									"key": "use_redis",
									"value": "false",
									"description": "استفاده از fallback به جای Redis"
								}
							]
						},
						"description": "مثال: دریافت توصیه‌ها بدون استفاده از Redis (fallback mode)"
					},
					"response": []
				}
			],
			"description": "Endpointهای مربوط به دریافت توصیه‌های محصولات برای کاربران"
		},
		{
			"name": "بینش کاربر - User Insights",
			"item": [
				{
					"name": "دریافت بینش‌های کاربر",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/insights/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"insights",
								"{{user_id}}"
							]
						},
						"description": "دریافت بینش‌ها و آمار مربوط به کاربر\n\n**اطلاعات برگشتی:**\n- `total_interactions`: تعداد کل تعاملات کاربر\n- `preferred_categories`: دسته‌بندی‌های مورد علاقه\n- `average_purchase_value`: میانگین ارزش خرید\n- `similar_users`: کاربران مشابه"
					},
					"response": [
						{
							"name": "User Insights",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/insights/{{user_id}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"insights",
										"{{user_id}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"total_interactions\": 10,\n    \"preferred_categories\": [\n        [\"دسته‌بندی 1\", 5],\n        [\"دسته‌بندی 2\", 3]\n    ],\n    \"average_purchase_value\": 150000.0,\n    \"similar_users\": [\n        [9391201, 0.0009],\n        [1234567, 0.0008]\n    ]\n}"
						}
					]
				}
			],
			"description": "Endpointهای مربوط به بینش‌ها و آمار کاربران"
		},
		{
			"name": "محصولات - Products",
			"item": [
				{
					"name": "محصولات محبوب - Popular Products",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/popular?limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"popular"
							],
							"query": [
								{
									"key": "limit",
									"value": "10",
									"description": "تعداد محصولات (پیش‌فرض: 10)"
								}
							]
						},
						"description": "دریافت لیست محصولات محبوب بر اساس تعداد خرید\n\n**پارامترها:**\n- `limit` (query): تعداد محصولات (default: 10)\n\n**پاسخ شامل:**\n- `product_id`: شناسه محصول\n- `purchase_count`: تعداد خرید\n- `product_title`: عنوان محصول\n- `product_price`: قیمت محصول"
					},
					"response": [
						{
							"name": "Popular Products",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/popular?limit=10",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"popular"
									],
									"query": [
										{
											"key": "limit",
											"value": "10"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n    {\n        \"product_id\": 12345,\n        \"purchase_count\": 150,\n        \"product_title\": \"محصول نمونه\",\n        \"product_price\": 100000.0\n    },\n    {\n        \"product_id\": 67890,\n        \"purchase_count\": 120,\n        \"product_title\": \"محصول دیگر\",\n        \"product_price\": 95000.0\n    }\n]"
						}
					]
				},
				{
					"name": "محصولات مشابه - Similar Products",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/similar/{{product_id}}?limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"similar",
								"{{product_id}}"
							],
							"query": [
								{
									"key": "limit",
									"value": "5",
									"description": "تعداد محصولات مشابه (پیش‌فرض: 5)"
								}
							]
						},
						"description": "دریافت محصولات مشابه به یک محصول خاص\n\n**پارامترها:**\n- `product_id` (path): شناسه محصول (required)\n- `limit` (query): تعداد محصولات مشابه (default: 5)\n\n**پاسخ شامل:**\n- `product_id`: شناسه محصول\n- `similarity_score`: امتیاز شباهت (0 تا 1)\n- `product_title`: عنوان محصول\n- `product_price`: قیمت محصول"
					},
					"response": [
						{
							"name": "Similar Products",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/similar/{{product_id}}?limit=5",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"similar",
										"{{product_id}}"
									],
									"query": [
										{
											"key": "limit",
											"value": "5"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n    {\n        \"product_id\": 67890,\n        \"similarity_score\": 0.85,\n        \"product_title\": \"محصول مشابه\",\n        \"product_price\": 95000.0\n    },\n    {\n        \"product_id\": 11111,\n        \"similarity_score\": 0.78,\n        \"product_title\": \"محصول دیگر\",\n        \"product_price\": 88000.0\n    }\n]"
						}
					]
				}
			],
			"description": "Endpointهای مربوط به محصولات (محبوب و مشابه)"
		},
		{
			"name": "مدیریت مدل - Model Management",
			"item": [
				{
					"name": "بازآموزی مدل - Retrain Model",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/retrain",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"retrain"
							]
						},
						"description": "بازآموزی کامل مدل سیستم توصیه\n\n**⚠️ هشدار:**\n- این عملیات می‌تواند 10-45 دقیقه طول بکشد!\n- در حین بازآموزی، سیستم ممکن است کند عمل کند\n- بهتر است این عملیات در ساعات کم‌ترافیک انجام شود\n\n**عملکرد:**\n1. آموزش مجدد HybridRecommender\n2. به‌روزرسانی کش محصولات\n3. بازگشت آمار محصولات بارگذاری شده"
					},
					"response": [
						{
							"name": "Retrain Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{base_url}}/retrain",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"retrain"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"مدل با موفقیت بازآموزی شد\",\n    \"products_count\": 36114\n}"
						},
						{
							"name": "Internal Server Error",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/retrain",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"retrain"
									]
								}
							},
							"status": "Internal Server Error",
							"code": 500,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"detail\": \"خطا در بازآموزی مدل: [پیام خطا]\n}"
						}
					]
				}
			],
			"description": "Endpointهای مربوط به مدیریت و به‌روزرسانی مدل"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string",
			"description": "آدرس پایه API - می‌توانید این را برای محیط‌های مختلف تغییر دهید"
		},
		{
			"key": "user_id",
			"value": "9194445",
			"type": "string",
			"description": "شناسه کاربر نمونه برای تست"
		},
		{
			"key": "product_id",
			"value": "501838",
			"type": "string",
			"description": "شناسه محصول نمونه برای تست"
		}
	]
}

